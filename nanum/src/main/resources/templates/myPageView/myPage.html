<!DOCTYPE html>
<html
        lang="ko"
        xmlns:th="http://www.thymeleaf.org"
        xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>My Page</title>
    <!-- style -->
    <link rel="stylesheet" href="/css/myPage/myPage.css" />
    <!-- script -->
    <script th:src="@{/js/jquery-3.7.1.min.js}"></script>
    <script th:src="@{/js/myPage/myPage.js}"></script>
</head>
<body>
<!-- 네비게이션 구역 -->
<div class="navigationContainer">

    <!-- 로고 -->
    <div class="logo">
        <a href="/">
            <img src="/images/logo.png" class="logoImg">
        </a>
    </div>

    <!-- 우리는 -->
    <div class="projectInfo">
          <span class="highlighterBlue">
              <a href="/info/service">우리는</a>
          </span>
    </div>

    <!-- 나눠요 -->
    <div class="projectInfo">
          <span class="highlighterBlue">
              <a href="/share/list">나눠요</a>
          </span>

    </div>

    <!-- 버려요 -->
    <div class="projectInfo">
          <span class="highlighterBlue">
            <a href="/recycle/list">버려요</a>
          </span>
    </div>

    <!-- 오른쪽 정렬 -->
    <div class="rightGroup">

        <!-- 로그인을 안했을 시 -->
        <th:block sec:authorize="not isAuthenticated()">
            <div class="join">
                <span class="highlighterGreen">
                  <a href="/member/join">회원가입</a>
                </span>
            </div>

            <div class="login">
                <span class="highlighterGreen">
                  <a href="/member/loginForm">로그인</a>
                </span>
            </div>
        </th:block>


        <!-- 로그인을 했을 시 -->
        <th:block sec:authorize="isAuthenticated()">

            <!--****************************************** 쪽지 *****************************-->
            <div class="message" id="messages" th:data-num="${#authentication.principal.num}">
                <!-- 쪽지 이미지  -->
                <img src="/images/post.png" class="postImage">
                <!-- 아래 뱃지 숫자는 알아서 변경하도록,,, -->
                <div class="badge" id="badge">0</div>
            </div>

            <!-- 쪽지 목록 모달 -->
            <div
                    id="messagesModal"
                    class="modal"
                    style="
                  max-height: calc(100vh - 5vh);
                  overflow-x: hidden;
                  overflow-y: auto;
                  "
            >
                <div class="modal-content">
                    <!-- 나눔 이야기 상단 영역 -->
                    <div class="messageUpside">
                        <h2>나눔 이야기</h2>
                        <!-- 닫기 버튼 -->
                        <span class="close">╳</span>
                    </div>
                    <!-- 쪽지방 목록이 출력되는 곳 -->
                    <div id="messageListContainer"></div>
                </div>
            </div>

            <!-- 쪽지 상세보기 모달 -->
            <div
                    id="detailsModal"
                    class="modal"
                    style="
                  max-height: calc(100vh - 5vh);
                  overflow-x: hidden;
                  overflow-y: auto;
                  "
            >
                <div class="modal-content">
                    <div class="messageUpside">
                        <div class="usernameContainer">
                            <img
                                    id="receiverProfileImage"
                                    src=""
                                    alt="Profile"
                                    style="width: 3vh; height: 3vh; border-radius: 50%; vertical-align: middle;"
                            />
                            <span class="usernameTitle"><b id="receiverNickname"></b>님에게</span>
                            <!-- 신고하기 버튼 (공백 유지) -->
                            <span id="userReportBtn" class="userReportButton highlighterRed">신고하기</span>
                        </div>
                        <!-- 닫기 버튼 -->
                        <span class="close">╳</span>
                    </div>

                    <!-- 게시글로 이동하는 영역 추가 -->
                    <div id="goToShareBoard" style="cursor: pointer">
                        <div
                                id="shareBoardLink"
                                style="
                        padding: 1vh 1vw;
                        border: 0.07vw solid #ccc;
                        text-align: center;
                        "
                        >
                            게시글로 이동
                        </div>
                    </div>

                    <!-- 쪽지 목록 출력 영역 -->
                    <div id="messageDetailsContainer"></div>
                    <!-- 쪽지 보내기 -->
                    <div id="detailContentsContainer">
                  <textarea
                          id="messageInput"
                          class="messageContents"
                          placeholder="내용을 입력해주세요!"
                          maxlength="100"
                  ></textarea>
                        <!-- 보내기 버튼 -->
                        <button id="sendMessageBtn">보내기</button>
                        <button id="shareComplete" style="display: none; margin-left: 1vw;">
                            나눔 완료
                        </button>
                    </div>
                </div>
            </div>

            <!-- 게시글 유저 신고 모달창 -->
            <div id="reportModal" class="modal">
                <div class="modal-content">
                    <!-- 신고 모달 상단 영역 -->
                    <div class="reportUpside">
                        <!-- 신고 타이틀과 신고하고자 하는 유저 닉네임을 포함하는 영역 -->
                        <div class="reportContainer">
                            <!-- 타이틀 -->
                            <span class="reportTitle">신고하기</span>
                            <!-- 신고하기 버튼 (공백 유지) -->
                            <span id="reportUser" class="reportUser">닉네임 님</span>
                        </div>
                        <!-- 닫기 버튼 -->
                        <span class="close">╳</span>
                    </div>

                    <form id="reportForm" class="reportArea">
                        <div>
                            <label class="reportReason"
                            ><input
                                    type="radio"
                                    name="reportReason"
                                    value="욕설, 인신공격 등 언어적 폭력"
                            />
                                욕설, 인신공격 등 언어적 폭력</label
                            >
                            <br>
                            <label class="reportReason"
                            ><input
                                    type="radio"
                                    name="reportReason"
                                    value="부적절한 게시글"
                            />
                                부적절한 게시글</label
                            >
                            <br>
                            <label class="reportReason"
                            ><input
                                    type="radio"
                                    name="reportReason"
                                    value="사기 또는 허위정보"
                            />
                                사기 또는 허위정보</label
                            >
                            <br>
                            <label class="reportReason"
                            ><input type="radio" name="reportReason" value="기타"/>
                                기타</label
                            >
                        </div>
                        <textarea
                                id="additionalReason"
                                class="additionalReason"
                                placeholder="기타 사유를 입력하세요."
                                maxlength="400"
                        ></textarea
                        ><br/>
                        <button type="button" id="submitUserReportBtn" class="reportSubmit">
                            신고 제출
                        </button>
                    </form>
                </div>
            </div>
            <!-- ************************************ 쪽지 목록 모달 *************************************-->

            <!-- 마이페이지  -->
            <div class="mypage">
                <span class="highlighterGreen">
                  <a th:href="@{/myPage/view}">마이페이지</a>
                </span>
            </div>

            <!-- 로그아웃 -->
            <div class="logout">
                <span class="highlighterGreen">
                  <a th:href="@{/member/logout}">로그아웃</a>
                </span>
            </div>
        </th:block>
    </div>
</div>

<!-- 공백 -->
<div class="blankContainer"></div>

<!-- mainContainer -->
<div id="mainContainer">

    <!-- 상단 프로필 부분 -->
    <div class="profileArea">
        <!-- 왼쪽 영역_프로필 이미지 -->
        <div class="profileImage">
            <img class="image"
                 alt="프로필 이미지"
                 th:src="@{/member/profileDownload(memberNum=${memberNum})}"
            />
        </div>

        <!-- 오른쪽 영역 -->
        <div class="userContentArea">
            <!-- 상단 -->
            <div class="userInfo">
                <!-- 닉네임, 개인정보 수정 영역 -->
                <div class="userNameContainer">
                    <!-- 닉네임 -->
                    <span class="userName" th:text="${userNickname}">이름</span>
                    <!-- 개인정보 수정 -->
                    <div class="infoSetting">
                        <a th:href="@{/myPage/profileEdit}"><img src="/images/setting.png"></a>
                    </div>
                    <!-- 알림 추가-->
                    <button id="alarmAdd">알림 추가</button>
                    <!-- 회원 탈퇴 -->
                    <button id="deleteId">회원 탈퇴</button>
                </div>
            </div>

            <div class="userAlert">
                <!-- 나의 나눔 -->
                <span class="shareCount">나의 나눔 <span th:text="${shareCount}">숫자</span></span>
                <!-- 북마크 -->
                <span class="pointCount">포인트 <span th:text="${pointCount}">숫자</span></span>
                <!-- 등록된 알림 -->
                <span class="alertCount">나의 알림 <span th:text="${alarmTotal}">요일</span></span>
            </div>
        </div>
    </div>

    <!-- 메뉴와 컨텐츠 사이 공백 -->
    <div class="menuBlank"></div>


    <!-- 메뉴 영역 -->
    <div class="menuArea">
        <!-- 나의 알림 -->
        <button class="myAlert" data-list="alarm" data-url="/myPage/showAlarm"><span class="menuHighlight">나의 알림</span>
        </button>
        <!-- 나의 나눔 -->
        <button class="myShare" data-list="give" data-url="/myPage/showGive"><span class="menuHighlight">나의 나눔</span>
        </button>
        <!-- 북마크 -->
        <button class="myBookmark" data-list="bookmark" data-url="/myPage/showBookmark"><span
                class="menuHighlight">북마크</span>
        </button>
    </div>

    <!-- 메뉴와 컨텐츠 사이의 공백 -->
    <div class="contentBlank"></div>

    <!-- 서브 페이지 영역 -->
    <div id="showData"></div>

    <!-- 나의 알림_알림 추가 모달 창 -->
    <div id="alarmAddModal" class="modal">
        <div class="modal-content">
            <!-- 모달 헤더: 타이틀과 닫기 버튼 -->
            <div class="modal-header">
                <div class="modal-title">나의 알림 등록하기</div>
                <span class="close" id="alarmAddClose">╳</span>
            </div>
            <!-- 모달 내용 -->
            <div class="alarmDay">
                <label id="alarmDay">요일</label>
                <br>
                <input type="radio" class="addDay" name="alarmDay" value="일요일"> 일
                <input type="radio" class="addDay" name="alarmDay" value="월요일"> 월
                <input type="radio" class="addDay" name="alarmDay" value="화요일"> 화
                <input type="radio" class="addDay" name="alarmDay" value="수요일"> 수
                <input type="radio" class="addDay" name="alarmDay" value="목요일"> 목
                <input type="radio" class="addDay" name="alarmDay" value="금요일"> 금
                <input type="radio" class="addDay" name="alarmDay" value="토요일"> 토
            </div>
            <div class="alarmContents">
                <label for="addContents">알림 내용</label>
                <br>
                <input type="text" id="addContents" class="alarmContents" name="alarmContents"
                       placeholder="내용을 입력해주세요!">
            </div>
            <button type="submit" id="added">저장</button>
        </div>
    </div>

    <!-- 알림 수정 모달 창 -->
    <div id="alarmEditModal" class="modal">
        <div class="modal-content">
            <!-- 모달 헤더: 타이틀과 닫기 버튼 -->
            <div class="modal-header">
                <div class="modal-title">나의 알림 수정하기</div>
                <span class="close" id="alarmEditClose">╳</span>
            </div>
            <div class="alarmDay">
                <label id="editDay">요일</label>
                <br>
                <input type="radio" class="editDay" name="alarmDay" value="일요일">일
                <input type="radio" class="editDay" name="alarmDay" value="월요일">월
                <input type="radio" class="editDay" name="alarmDay" value="화요일">화
                <input type="radio" class="editDay" name="alarmDay" value="목요일">목
                <input type="radio" class="editDay" name="alarmDay" value="수요일">수
                <input type="radio" class="editDay" name="alarmDay" value="금요일">금
                <input type="radio" class="editDay" name="alarmDay" value="토요일">토
            </div>
            <div class="alarmContents">
                <label for="addContents">알림 내용</label>
                <br>
                <input type="text" id="editContents" class="alarmContents" name="alarmContents"
                       placeholder="내용을 입력해주세요!">
            </div>
            <button type="submit" id="edited">수정</button>
        </div>
    </div>

    <!-- 탈퇴 경고 모달 -->
    <div id="alertModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">회원 탈퇴 하기</div>
                <span class="close" id="alertClose">╳</span>
            </div>
            <div id="board">
                <div class="deleteAlert">
                    정말로 탈퇴하시겠습니까?
                </div>
                <div id="button">
                    <button id="reset">취소</button>
                    <button id="next">탈퇴하기</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 비밀번호 확인 모달 -->
    <div id="checkModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">비밀번호 확인</div>
                <span class="close" id="checkClose">╳</span>
            </div>
            <div id="check">
                <!-- 비밀번호 입력 -->
                <div class="passwordUpsideArea">
                    <div class="passwordTitle">비밀번호를 입력해주세요</div>
                </div>
                <div class="passwordInputArea">
                    <input type="password" name="pwCheck" id="pwCheck"/>
                </div>
                <div class="button">
                    <button id="delete">탈퇴하기</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 탈퇴 확인 모달 -->
    <div id="verifyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title"></div>
                <span class="close" id="verifyClose">╳</span>
            </div>
            <div id="verify">탈퇴되었습니다.</div>
        </div>
    </div>

    <!--    <button data-list="donate" data-url="/myPage/showGive">나눴어요</button>-->
    <!--    <button data-list="pendingGive" data-url="/myPage/showGive">나눠요</button>-->
    <!--    <button data-list="receive" data-url="/myPage/showReceive">받았어요</button>-->
</div>
</body>
</html>
